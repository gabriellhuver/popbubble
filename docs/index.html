<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-touch-fullscreen" content="yes">
    
    <!-- Primary Meta Tags -->
    <title>ü´ß Pop! Bubbles - Fun Bubble Popping Game | Free Online</title>
    <meta name="title" content="ü´ß Pop! Bubbles - Fun Bubble Popping Game | Free Online">
    <meta name="description" content="Play Pop! Bubbles - an addictive bubble popping game with 4 difficulty levels, custom mode, combo system, and beautiful particle effects. Free to play, no download required!">
    <meta name="keywords" content="bubble popping game, pop bubbles, online game, free game, arcade game, casual game, stress relief, fun game, bubble game, pop game, click game, mobile game, desktop game">
    <meta name="author" content="Gabriel Lhuver">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gabriellhuver.github.io/popbubble/">
    <meta property="og:title" content="ü´ß Pop! Bubbles - Fun Bubble Popping Game">
    <meta property="og:description" content="Play Pop! Bubbles - an addictive bubble popping game with 4 difficulty levels, custom mode, combo system, and beautiful particle effects. Free to play!">
    <meta property="og:image" content="https://gabriellhuver.github.io/popbubble/assets/twitter-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Pop! Bubbles - Fun Bubble Popping Game with colorful bubbles and game features">
    <meta property="og:site_name" content="Pop! Bubbles Game">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://gabriellhuver.github.io/popbubble/">
    <meta property="twitter:title" content="ü´ß Pop! Bubbles - Fun Bubble Popping Game">
    <meta property="twitter:description" content="Play Pop! Bubbles - an addictive bubble popping game with 4 difficulty levels, custom mode, combo system, and beautiful particle effects. Free to play!">
    <meta property="twitter:image" content="https://gabriellhuver.github.io/popbubble/assets/twitter-image.png">
    <meta property="twitter:image:alt" content="Pop! Bubbles - Fun Bubble Popping Game with colorful bubbles and game features">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#00ff88">
    <meta name="msapplication-TileColor" content="#00ff88">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Pop! Bubbles">
    
    <!-- Game Specific -->
    <meta name="game:genre" content="Arcade, Casual, Puzzle">
    <meta name="game:platform" content="Web Browser, Mobile, Desktop">
    <meta name="game:rating" content="E for Everyone">
    <meta name="game:price" content="Free">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon-32x32.png">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="manifest" href="site.webmanifest">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2DR3EWXTTF"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-2DR3EWXTTF');
    </script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "Pop! Bubbles",
        "description": "An addictive bubble popping game with 4 difficulty levels, custom mode, combo system, and beautiful particle effects.",
        "url": "https://gabriellhuver.github.io/popbubble/",
        "image": "https://gabriellhuver.github.io/popbubble/assets/twitter-image.png",
        "genre": ["Arcade", "Casual", "Puzzle"],
        "gamePlatform": ["Web Browser", "Mobile", "Desktop"],
        "operatingSystem": ["Windows", "macOS", "Linux", "iOS", "Android"],
        "applicationCategory": "Game",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Person",
            "name": "Gabriel Lhuver"
        },
        "publisher": {
            "@type": "Person",
            "name": "Gabriel Lhuver"
        },
        "datePublished": "2024-01-01",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "playMode": "SinglePlayer",
        "gameItem": [
            {
                "@type": "Thing",
                "name": "Easy Mode",
                "description": "Big bubbles, slow rhythm - perfect for beginners"
            },
            {
                "@type": "Thing",
                "name": "Medium Mode", 
                "description": "Medium size, normal rhythm - balanced gameplay"
            },
            {
                "@type": "Thing",
                "name": "Hard Mode",
                "description": "Small bubbles, fast rhythm - challenging gameplay"
            },
            {
                "@type": "Thing",
                "name": "Pro Mode",
                "description": "Maximum speed, many bubbles - expert level"
            },
            {
                "@type": "Thing",
                "name": "Custom Mode",
                "description": "Create your own difficulty with sliders"
            }
        ]
    }
    </script>
</head>

<body>
    <canvas id="gameCanvas"></canvas>
    
    <!-- UI Overlay -->
    <!-- Difficulty Selection Screen -->
    <div id="difficultyScreen">
        <div class="difficulty-container">
            <h1>ü´ß Pop! Bubbles</h1>
            <p>Choose your difficulty:</p>
            <div class="difficulty-options">
                <button class="difficulty-btn" data-difficulty="easy">
                    <div class="difficulty-title">Easy</div>
                    <div class="difficulty-desc">Big bubbles, slow rhythm</div>
                </button>
                <button class="difficulty-btn" data-difficulty="medium">
                    <div class="difficulty-title">Medium</div>
                    <div class="difficulty-desc">Medium size, normal rhythm</div>
                </button>
                <button class="difficulty-btn" data-difficulty="hard">
                    <div class="difficulty-title">Hard</div>
                    <div class="difficulty-desc">Small bubbles, fast rhythm</div>
                </button>
                <button class="difficulty-btn" data-difficulty="pro">
                    <div class="difficulty-title">Pro</div>
                    <div class="difficulty-desc">Maximum speed, many bubbles</div>
                </button>
                <button class="difficulty-btn" data-difficulty="custom">
                    <div class="difficulty-title">Custom</div>
                    <div class="difficulty-desc">Create your own challenge</div>
                </button>
            </div>
            
            <!-- Donate section on home -->
            <div class="home-donate-section">
                <p class="home-donate-text">Support the developer!</p>
                <a href="https://buy.stripe.com/4gM3cu3YA4Cg64m8u94AU00" target="_blank" class="home-donate-btn">
                    ‚òï Buy me a coffee
                </a>
            </div>
            
            <!-- GitHub section on home -->
            <div class="home-github-section">
                <a href="https://github.com/gabriellhuver/popbubble" target="_blank" class="home-github-btn">
                    <span class="github-icon">üêô</span>
                    <span class="github-text">View Source Code</span>
                </a>
            </div>
            
            <!-- Custom Difficulty Settings -->
            <div id="customSettings" class="custom-settings hidden">
                <h3>üéõÔ∏è Custom Difficulty</h3>
                <div class="setting-group">
                    <label for="spawnRateSlider">Spawn Rate (ms): <span id="spawnRateValue">1000</span></label>
                    <input type="range" id="spawnRateSlider" min="100" max="2000" value="1000" step="50">
                </div>
                <div class="setting-group">
                    <label for="maxBubblesSlider">Max Bubbles: <span id="maxBubblesValue">35</span></label>
                    <input type="range" id="maxBubblesSlider" min="10" max="150" value="35" step="5">
                </div>
                <div class="setting-group">
                    <label for="sizeMinSlider">Min Size (px): <span id="sizeMinValue">25</span></label>
                    <input type="range" id="sizeMinSlider" min="5" max="50" value="25" step="1">
                </div>
                <div class="setting-group">
                    <label for="sizeMaxSlider">Max Size (px): <span id="sizeMaxValue">50</span></label>
                    <input type="range" id="sizeMaxSlider" min="10" max="80" value="50" step="1">
                </div>
                <div class="setting-group">
                    <label for="speedSlider">Speed: <span id="speedValue">30</span></label>
                    <input type="range" id="speedSlider" min="10" max="120" value="30" step="5">
                </div>
                <div class="setting-group">
                    <label for="penaltySlider">Penalty Points: <span id="penaltyValue">10</span></label>
                    <input type="range" id="penaltySlider" min="1" max="50" value="10" step="1">
                </div>
                <button id="startCustomGame" class="start-custom-btn">üöÄ Start Custom Game</button>
            </div>
        </div>
    </div>

    <div id="ui" class="hidden">
        <div id="hud">
            <div class="hud-left">
                <div id="score">0</div>
                <div id="combo" class="hidden">x1</div>
                <div id="streak" class="hidden">Streak: 0</div>
            </div>
            <div class="hud-right">
                <div id="highScore">High Score: 0</div>
                <div id="difficulty">Easy</div>
                <div id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
            </div>
        </div>
        
        <div id="controls">
            <button id="muteBtn" title="Mute (M)">üîà</button>
        </div>
        
        <div id="missFeedback" class="hidden">Miss!</div>
        <div id="missClickFeedback" class="hidden">Miss!</div>
        <div id="penaltyFeedback" class="hidden">-10</div>
        <div id="comboFeedback" class="hidden">Combo!</div>
        <div id="streakFeedback" class="hidden">Streak!</div>
        
        <div id="hints">
            <div>Click to pop üéß ‚Ä¢ M to mute ‚Ä¢ P to pause ‚Ä¢ R to restart</div>
        </div>
        
        <div id="pauseOverlay" class="hidden">
            <div>Paused ‚Äî P to resume</div>
        </div>
        
        <div id="gameOverOverlay" class="hidden">
            <div class="game-over-container">
                <h2>üíî Game Over!</h2>
                <div class="final-score">Final Score: <span id="finalScore">0</span></div>
                <div class="high-score">High Score: <span id="finalHighScore">0</span></div>
                <div class="max-streak">Max Streak: <span id="finalMaxStreak">0</span></div>
                
                <!-- Support the Game -->
                <div class="support-section">
                    <p class="support-text">Enjoying the game? Support development!</p>
                    <a href="https://buy.stripe.com/4gM3cu3YA4Cg64m8u94AU00" target="_blank" class="support-btn" onclick="console.log('Support button clicked!')">
                        ‚òï Buy me a coffee
                    </a>
                </div>
                
                                <button id="playAgainBtn" class="play-again-btn">Play Again</button>
            </div>
        </div>
    </div>
    
    <!-- Footer with version -->
    <footer id="footer" class="version-footer">
        <div class="version-info">
            <span class="version-text">Version <span id="versionNumber">1.0.0</span></span>
            <span class="build-info">Build <span id="buildNumber">1</span></span>
        </div>
    </footer>
    
    <script src="audio.js"></script>
    <script src="game.js"></script>
    
    <!-- Version Management Script -->
    <script>
        // Version management system
        class VersionManager {
            constructor() {
                this.versionKey = 'popbubble_version';
                this.buildKey = 'popbubble_build';
                this.lastUpdateKey = 'popbubble_last_update';
                this.init();
            }
            
            init() {
                // Get current date for build number
                const today = new Date();
                const dateString = today.getFullYear().toString() + 
                                 (today.getMonth() + 1).toString().padStart(2, '0') + 
                                 today.getDate().toString().padStart(2, '0');
                
                // Get stored version or set initial
                let version = localStorage.getItem(this.versionKey) || '1.0.0';
                let build = localStorage.getItem(this.buildKey) || '1';
                let lastUpdate = localStorage.getItem(this.lastUpdateKey) || dateString;
                
                // Check if it's a new day (increment build)
                if (lastUpdate !== dateString) {
                    build = (parseInt(build) + 1).toString();
                    localStorage.setItem(this.buildKey, build);
                    localStorage.setItem(this.lastUpdateKey, dateString);
                }
                
                // Update display
                document.getElementById('versionNumber').textContent = version;
                document.getElementById('buildNumber').textContent = build;
                
                // Store current version
                localStorage.setItem(this.versionKey, version);
            }
            
            // Method to increment version (can be called manually)
            incrementVersion() {
                const currentVersion = localStorage.getItem(this.versionKey) || '1.0.0';
                const parts = currentVersion.split('.');
                const patch = parseInt(parts[2]) + 1;
                const newVersion = `${parts[0]}.${parts[1]}.${patch}`;
                
                localStorage.setItem(this.versionKey, newVersion);
                document.getElementById('versionNumber').textContent = newVersion;
                
                return newVersion;
            }
            
            // Method to increment minor version
            incrementMinor() {
                const currentVersion = localStorage.getItem(this.versionKey) || '1.0.0';
                const parts = currentVersion.split('.');
                const minor = parseInt(parts[1]) + 1;
                const newVersion = `${parts[0]}.${minor}.0`;
                
                localStorage.setItem(this.versionKey, newVersion);
                document.getElementById('versionNumber').textContent = newVersion;
                
                return newVersion;
            }
            
            // Method to increment major version
            incrementMajor() {
                const currentVersion = localStorage.getItem(this.versionKey) || '1.0.0';
                const parts = currentVersion.split('.');
                const major = parseInt(parts[0]) + 1;
                const newVersion = `${major}.0.0`;
                
                localStorage.setItem(this.versionKey, newVersion);
                document.getElementById('versionNumber').textContent = newVersion;
                
                return newVersion;
            }
        }
        
        // Initialize version manager
        const versionManager = new VersionManager();
        
        // Make it globally available for manual updates
        window.versionManager = versionManager;
        
        // Auto-increment on significant changes (detect file changes)
        const lastFileHash = localStorage.getItem('popbubble_file_hash');
        const currentFileHash = btoa(JSON.stringify({
            html: document.documentElement.outerHTML.length,
            css: document.styleSheets.length,
            js: document.scripts.length,
            timestamp: Date.now()
        }));
        
        if (lastFileHash && lastFileHash !== currentFileHash) {
            // File has changed, increment patch version
            versionManager.incrementVersion();
        }
        
        localStorage.setItem('popbubble_file_hash', currentFileHash);
    </script>
</body>
</html>
